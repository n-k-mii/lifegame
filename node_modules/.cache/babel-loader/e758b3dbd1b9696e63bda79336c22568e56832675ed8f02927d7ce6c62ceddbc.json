{"ast":null,"code":"import { obtainSlot, optionNullableMemberDecorator } from '../utils';\nimport { decorator as PropsDecorator } from './props';\nexport const decorator = optionNullableMemberDecorator(function (proto, name, option) {\n  var _a;\n  option !== null && option !== void 0 ? option : option = {};\n  const slot = obtainSlot(proto);\n  let vmodelName = 'modelValue';\n  const propsConfig = Object.assign({}, option);\n  if (propsConfig) {\n    vmodelName = (_a = propsConfig.name) !== null && _a !== void 0 ? _a : vmodelName;\n    delete propsConfig.name;\n  }\n  PropsDecorator(propsConfig)(proto, vmodelName);\n  const map = slot.obtainMap('v-model');\n  map.set(name, option);\n});\nexport function build(cons, optionBuilder) {\n  var _a;\n  (_a = optionBuilder.computed) !== null && _a !== void 0 ? _a : optionBuilder.computed = {};\n  const slot = obtainSlot(cons.prototype);\n  const names = slot.getMap('v-model');\n  if (!names || names.size === 0) {\n    return;\n  }\n  const emits = slot.obtainMap('emits');\n  names.forEach((value, name) => {\n    var _a;\n    const vmodelName = (_a = value && value.name) !== null && _a !== void 0 ? _a : 'modelValue';\n    const eventName = `update:${vmodelName}`;\n    optionBuilder.computed[name] = {\n      get: function () {\n        return this[vmodelName];\n      },\n      set: function (val) {\n        this.$emit(eventName, val);\n      }\n    };\n    emits.set(eventName, true);\n  });\n}","map":{"version":3,"names":["obtainSlot","optionNullableMemberDecorator","decorator","PropsDecorator","proto","name","option","slot","vmodelName","propsConfig","Object","assign","_a","map","obtainMap","set","build","cons","optionBuilder","computed","prototype","names","getMap","size","emits","forEach","value","eventName","get","val","$emit"],"sources":["../../../src/option/vmodel.ts"],"sourcesContent":[null],"mappings":"AAEA,SAASA,UAAU,EAAEC,6BAA6B,QAAQ,UAAU;AACpE,SAASC,SAAS,IAAIC,cAAc,QAA0B,SAAS;AAMvE,OAAO,MAAMD,SAAS,GAAGD,6BAA6B,CAAC,UAAUG,KAAU,EAAEC,IAAY,EAAEC,MAAqB;;EAC5GA,MAAM,aAANA,MAAM,cAANA,MAAM,GAANA,MAAM,GAAK,EAAE;EACb,MAAMC,IAAI,GAAGP,UAAU,CAACI,KAAK,CAAC;EAC9B,IAAII,UAAU,GAAG,YAAY;EAC7B,MAAMC,WAAW,GAAAC,MAAA,CAAAC,MAAA,KAAQL,MAAM,CAAE;EACjC,IAAIG,WAAW,EAAE;IACbD,UAAU,GAAG,CAAAI,EAAA,GAAAH,WAAW,CAACJ,IAAI,cAAAO,EAAA,cAAAA,EAAA,GAAIJ,UAAU;IAC3C,OAAOC,WAAW,CAACJ,IAAI;;EAE3BF,cAAc,CAACM,WAAW,CAAC,CAACL,KAAK,EAAEI,UAAU,CAAC;EAC9C,MAAMK,GAAG,GAAGN,IAAI,CAACO,SAAS,CAAC,SAAS,CAAC;EACrCD,GAAG,CAACE,GAAG,CAACV,IAAI,EAAEC,MAAM,CAAC;AACzB,CAAC,CAAC;AAEF,OAAM,SAAUU,KAAKA,CAACC,IAAU,EAAEC,aAA4B;;EAC1D,CAAAN,EAAA,GAAAM,aAAa,CAACC,QAAQ,cAAAP,EAAA,cAAAA,EAAA,GAAtBM,aAAa,CAACC,QAAQ,GAAK,EAAE;EAC7B,MAAMZ,IAAI,GAAGP,UAAU,CAACiB,IAAI,CAACG,SAAS,CAAC;EACvC,MAAMC,KAAK,GAAGd,IAAI,CAACe,MAAM,CAAC,SAAS,CAAC;EACpC,IAAI,CAACD,KAAK,IAAIA,KAAK,CAACE,IAAI,KAAK,CAAC,EAAE;IAC5B;;EAEJ,MAAMC,KAAK,GAAGjB,IAAI,CAACO,SAAS,CAAC,OAAO,CAAC;EAErCO,KAAK,CAACI,OAAO,CAAC,CAACC,KAAK,EAAErB,IAAI,KAAI;;IAC1B,MAAMG,UAAU,GAAG,CAAAI,EAAA,GAACc,KAAK,IAAIA,KAAK,CAACrB,IAAK,cAAAO,EAAA,cAAAA,EAAA,GAAI,YAAY;IACxD,MAAMe,SAAS,GAAG,UAAUnB,UAAU,EAAE;IACxCU,aAAa,CAACC,QAAS,CAACd,IAAI,CAAC,GAAG;MAC5BuB,GAAG,EAAE,SAAAA,CAAA;QACD,OAAO,IAAI,CAACpB,UAAU,CAAC;MAC3B,CAAC;MACDO,GAAG,EAAE,SAAAA,CAAUc,GAAQ;QACnB,IAAI,CAACC,KAAK,CAACH,SAAS,EAAEE,GAAG,CAAC;MAC9B;KACH;IACDL,KAAK,CAACT,GAAG,CAACY,SAAS,EAAE,IAAI,CAAC;EAC9B,CAAC,CAAC;AAEN"},"metadata":{},"sourceType":"module","externalDependencies":[]}