{"ast":null,"code":"import { obtainSlot } from '../utils';\nexport const Compatible = {};\nexport function compatibleClassDecorator(deco) {\n  return function (arg, ctx) {\n    var _a;\n    if (ctx) {\n      //stage 3\n      if (ctx.kind !== 'class') {\n        throw 'deco stage 3 class';\n      }\n      const proto = (_a = Compatible.fakePrototype) !== null && _a !== void 0 ? _a : Compatible.fakePrototype = {};\n      const slot = obtainSlot(proto);\n      delete Compatible.fakePrototype;\n      obtainSlot(arg.prototype, slot);\n      const ret = deco(arg);\n      return ret;\n    } else {\n      return deco(arg);\n    }\n  };\n}\nexport function compatibleMemberDecorator(deco) {\n  return function (arg, ctx) {\n    var _a;\n    if (typeof ctx === 'object') {\n      //stage 3\n      const proto = (_a = Compatible.fakePrototype) !== null && _a !== void 0 ? _a : Compatible.fakePrototype = {};\n      proto[ctx.name] = arg;\n      return deco(proto, ctx.name);\n    } else {\n      return deco(arg, ctx);\n    }\n  };\n}","map":{"version":3,"names":["obtainSlot","Compatible","compatibleClassDecorator","deco","arg","ctx","kind","proto","_a","fakePrototype","slot","prototype","ret","compatibleMemberDecorator","name"],"sources":["../../../src/deco3/utils.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,UAAU,QAAQ,UAAU;AACrC,OAAO,MAAMC,UAAU,GAGnB,EAEH;AACD,OAAM,SAAUC,wBAAwBA,CAACC,IAAc;EACnD,OAAO,UAAUC,GAAQ,EAAEC,GAAsB;;IAE7C,IAAIA,GAAG,EAAE;MAAC;MAEN,IAAIA,GAAG,CAACC,IAAI,KAAK,OAAO,EAAE;QACtB,MAAM,oBAAoB;;MAE9B,MAAMC,KAAK,IAAAC,EAAA,GAAGP,UAAU,CAACQ,aAAa,cAAAD,EAAA,cAAAA,EAAA,GAAxBP,UAAU,CAACQ,aAAa,GAAK,EAAE;MAC7C,MAAMC,IAAI,GAAGV,UAAU,CAACO,KAAK,CAAC;MAC9B,OAAON,UAAU,CAACQ,aAAa;MAE/BT,UAAU,CAACI,GAAG,CAACO,SAAS,EAAED,IAAI,CAAC;MAC/B,MAAME,GAAG,GAAGT,IAAI,CAACC,GAAG,CAAC;MAErB,OAAOQ,GAAG;KACb,MACI;MAED,OAAOT,IAAI,CAACC,GAAG,CAAC;;EAExB,CAAC;AACL;AAEA,OAAM,SAAUS,yBAAyBA,CAACV,IAAc;EACpD,OAAO,UAAUC,GAAQ,EAAEC,GAA8B;;IACrD,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;MAAC;MAC1B,MAAME,KAAK,IAAAC,EAAA,GAAGP,UAAU,CAACQ,aAAa,cAAAD,EAAA,cAAAA,EAAA,GAAxBP,UAAU,CAACQ,aAAa,GAAK,EAAE;MAC7CF,KAAK,CAACF,GAAG,CAACS,IAAK,CAAC,GAAGV,GAAG;MACtB,OAAOD,IAAI,CAACI,KAAK,EAAEF,GAAG,CAACS,IAAI,CAAC;KAC/B,MAAM;MACH,OAAOX,IAAI,CAACC,GAAG,EAAEC,GAAG,CAAC;;EAE7B,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}