{"ast":null,"code":"import { applyAccessors } from '../optionBuilder';\nimport { obtainSlot, optionNullableMemberDecorator } from '../utils';\nexport const decorator = optionNullableMemberDecorator(function (proto, name, key) {\n  const slot = obtainSlot(proto);\n  const map = slot.obtainMap('ref');\n  map.set(name, typeof key === 'undefined' ? null : key);\n});\nexport function build(cons, optionBuilder) {\n  const slot = obtainSlot(cons.prototype);\n  const names = slot.getMap('ref');\n  if (!names || names.size === 0) {\n    return;\n  }\n  applyAccessors(optionBuilder, ctx => {\n    const data = new Map();\n    names.forEach((value, name) => {\n      const refKey = value === null ? name : value;\n      data.set(name, {\n        get: function () {\n          return ctx.$refs[refKey];\n        },\n        set: undefined\n      });\n    });\n    return data;\n  });\n}","map":{"version":3,"names":["applyAccessors","obtainSlot","optionNullableMemberDecorator","decorator","proto","name","key","slot","map","obtainMap","set","build","cons","optionBuilder","prototype","names","getMap","size","ctx","data","Map","forEach","value","refKey","get","$refs","undefined"],"sources":["../../../src/option/ref.ts"],"sourcesContent":[null],"mappings":"AACA,SAA6BA,cAAc,QAAQ,kBAAkB;AACrE,SAASC,UAAU,EAAEC,6BAA6B,QAAQ,UAAU;AAIpE,OAAO,MAAMC,SAAS,GAAGD,6BAA6B,CAAC,UAAUE,KAAU,EAAEC,IAAY,EAAEC,GAAY;EACnG,MAAMC,IAAI,GAAGN,UAAU,CAACG,KAAK,CAAC;EAC9B,MAAMI,GAAG,GAAGD,IAAI,CAACE,SAAS,CAAC,KAAK,CAAC;EACjCD,GAAG,CAACE,GAAG,CAACL,IAAI,EAAE,OAAOC,GAAG,KAAK,WAAW,GAAG,IAAI,GAAGA,GAAG,CAAC;AAC1D,CAAC,CAAC;AAGF,OAAM,SAAUK,KAAKA,CAACC,IAAU,EAAEC,aAA4B;EAC1D,MAAMN,IAAI,GAAGN,UAAU,CAACW,IAAI,CAACE,SAAS,CAAC;EAEvC,MAAMC,KAAK,GAAGR,IAAI,CAACS,MAAM,CAAC,KAAK,CAAC;EAChC,IAAI,CAACD,KAAK,IAAIA,KAAK,CAACE,IAAI,KAAK,CAAC,EAAE;IAC5B;;EAGJjB,cAAc,CAACa,aAAa,EAAGK,GAAQ,IAAI;IACvC,MAAMC,IAAI,GAAoD,IAAIC,GAAG,CAAH,CAAG;IACrEL,KAAK,CAACM,OAAO,CAAC,CAACC,KAAK,EAAEjB,IAAI,KAAI;MAC1B,MAAMkB,MAAM,GAAGD,KAAK,KAAK,IAAI,GAAGjB,IAAI,GAAGiB,KAAK;MAC5CH,IAAI,CAACT,GAAG,CAACL,IAAI,EAAE;QACXmB,GAAG,EAAE,SAAAA,CAAA;UACD,OAAON,GAAG,CAACO,KAAK,CAACF,MAAM,CAAC;QAC5B,CAAC;QACDb,GAAG,EAAEgB;OAER,CAAC;IACN,CAAC,CAAC;IACF,OAAOP,IAAI;EACf,CAAC,CAAC;AAEN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}